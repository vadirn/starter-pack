import { equal } from 'equal';

/**
 * Returns a function that memoizes latest return value and re-runs it when arguments change
 * @param fn {function}
 * @return {function}
 */
export function memo(fn) {
  let cachedArgs;
  let cachedReturn;
  return (...args) => {
    if (equal(cachedArgs, args)) return cachedReturn;
    cachedReturn = fn(...args);
    cachedArgs = args.slice();
    return cachedReturn;
  };
}
