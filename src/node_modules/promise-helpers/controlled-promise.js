/**
 * Returns a promise with resolve and reject function available as properties
 * @returns {Promise & {resolve: *, reject: *}}
 */
export function controlledPromise() {
  let resolve;
  let reject;
  const returnValue = new Promise((res, rej) => {
    resolve = arg => {
      res(arg);
      return returnValue;
    };
    reject = arg => {
      rej(arg);
      return returnValue;
    };
  });
  return Object.assign(returnValue, {
    resolve,
    reject,
  });
}
